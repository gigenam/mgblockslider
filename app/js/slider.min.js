!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var i=function(){function i(){var e=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=s.selector,r=void 0===n?".wp-block-mgblockslider-slider":n,l=s.theme,o=void 0===l?"light":l,c=s.directionNav,a=void 0===c||c,d=s.hideDirections,h=void 0===d||d,u=s.controlNav,g=void 0!==u&&u,v=s.hideControls,m=void 0!==v&&v,p=s.thumbsNav,b=void 0!==p&&p,k=s.hideThumbs,_=void 0!==k&&k,f=s.autoStart,w=void 0===f||f,L=s.stopOnHover,S=void 0===L||L,y=s.pauseUnfocused,E=void 0===y||y,x=s.waitVideo,C=void 0!==x&&x,T=s.swipeNav,q=void 0===T||T,I=s.animation,N=void 0===I?"slide":I,D=s.vertical,H=void 0!==D&&D,M=s.transition,O=void 0===M?"ease":M,A=s.duration,P=void 0===A?5:A,j=s.speed,B=void 0===j?.5:j,U=s.arrowType,R=void 0===U?"":U,V=s.paginationType,G=void 0===V?"":V,X=s.autoHeight,F=void 0===X||X;t(this,i),this.selector=r,this.theme=o,this.directionNav=a,this.hideDirections=h,this.controlNav=g,this.hideControls=m,this.thumbsNav=b,this.hideThumbs=_,this.autoStart=w,this.stopOnHover=S,this.pauseUnfocused=E,this.waitVideo=C,this.swipeNav=q,this.animation=N,this.vertical=H,this.transition=O,this.duration=1e3*P,this.speed=1e3*B,this.arrowType=R,this.paginationType=G,this.autoHeight=F,this.current=0,this.loadState=!1,this.triggerObserver=!1,this.slider=document.querySelector("".concat(this.selector," .wp-block-mg-block-slider-slider__container")),this.slidesContainer=document.querySelector("".concat(this.selector," .wp-block-mg-block-slider-slides__container")),this.slides=document.querySelectorAll("".concat(this.selector," .wp-block-mg-block-slider-slide")),this.i18n=mgblocksliderI18n,this.slider&&(document.addEventListener("DOMContentLoaded",(function(){return e.initSlider()})),window.addEventListener("load",(function(){e.loadState=!0,e.slider.parentElement.removeChild(e.loadingSpinner)})))}var s,n;return s=i,n=[{key:"initSlider",value:function(){"none"!==this.animation&&(this.slidesContainer.style.transitionDuration="".concat(this.speed,"ms"),this.slidesContainer.style.transitionTimingFunction=this.transition),this.slider.parentElement.classList.add("".concat(this.theme,"-theme")),this.slider.classList.add("is-".concat(this.animation)),this.vertical&&this.slider.classList.add("is-vertical"),this.slides[this.current].classList.add("wp-block-mg-block-slider-slide__current"),2===this.slides.length&&this.slidesContainer.classList.add("wp-block-mg-block-slider-slides__container--2-slides"),this.createControls(),this.changeSlide(),this.loadingEvent(this.loadState),this.swipeNav&&(this.swipeEvents(),this.keyEvents()),this.autoStart&&this.startAnimation(),this.autoHeight&&(this.calcMinHeight(),this.slider.parentElement.classList.add("auto-height"))}},{key:"calcMinHeight",value:function(){var t=0;this.slides.forEach((function(e){e.getBoundingClientRect().height>t&&(t=e.getBoundingClientRect().height),e.style.height="".concat(Math.floor(t),"px")}))}},{key:"createControls",value:function(){var t=this;if(this.directionNav){var e=document.createElement("div");e.classList.add("wp-block-mg-block-slider-slider__control","wp-block-mg-block-slider-slider__control__arrows"),e.innerHTML='\n\t\t\t\t<p class="wp-block-mg-block-slider-slider__control__arrow wp-block-mg-block-slider-slider__control__arrow--prev" title="'.concat(this.i18n.prev,'">\n\t\t\t\t\t<span class="screen-reader-text">').concat(this.i18n.showPrevSlide,'</span>\n\t\t\t\t</p>\n\t\t\t\t<p class="wp-block-mg-block-slider-slider__control__arrow wp-block-mg-block-slider-slider__control__arrow--next" title="').concat(this.i18n.next,'">\n\t\t\t\t\t<span class="screen-reader-text">').concat(this.i18n.showNextSlide,"</span>\n\t\t\t\t</p>"),""!==this.arrowType&&e.classList.add("wp-block-mg-block-slider-slider__control--".concat(this.arrowType)),this.slider.appendChild(e);var i=e.querySelector(".wp-block-mg-block-slider-slider__control__arrow--prev"),s=e.querySelector(".wp-block-mg-block-slider-slider__control__arrow--next");i.addEventListener("click",(function(e){e.target.classList.contains("is-changing")||(e.target.classList.add("is-changing"),t.current>0?t.current--:t.current=t.slides.length-1,t.changeSlide("prev"),setTimeout((function(){return e.target.classList.remove("is-changing")}),t.speed))})),s.addEventListener("click",(function(e){e.target.classList.contains("is-changing")||(e.target.classList.add("is-changing"),t.current=(t.current+1)%t.slides.length,t.changeSlide("next"),setTimeout((function(){return e.target.classList.remove("is-changing")}),t.speed))})),this.slider.classList.add("directional-nav"),this.hideDirections&&this.slider.classList.add("directional-nav--is-hidden")}if(this.controlNav){var n=document.createElement("ul");n.classList.add("wp-block-mg-block-slider-slider__control","wp-block-mg-block-slider-slider__control__dots"),this.slides.forEach((function(e,i){return n.innerHTML+='\n\t\t\t\t<li class="wp-block-mg-block-slider-slider__control__dot" title="'.concat(i+1,'">\n\t\t\t\t\t<span class="screen-reader-text">').concat(t.i18n.showSlide," ").concat(i+1,"</span>\n\t\t\t\t</li>")})),""!==this.paginationType&&n.classList.add("wp-block-mg-block-slider-slider__control--".concat(this.paginationType)),this.slider.insertAdjacentElement("afterend",n),this.navDots=document.querySelectorAll("".concat(this.selector," .wp-block-mg-block-slider-slider__control__dot")),this.navDots[this.current].classList.add("wp-block-mg-block-slider-slider__control__dot--current"),this.navDots.forEach((function(e,i){e.addEventListener("click",(function(){t.changeControls(t.navDots,"wp-block-mg-block-slider-slider__control__dot--current",i),t.changeSlide("dots",i),(i===t.current+1||i===t.current-1)&&t.changeSlide(!1,i),t.current=i}))})),this.slider.classList.add("control-nav"),this.hideControls&&this.slider.classList.add("control-nav--is-hidden")}if(this.thumbsNav){var r=document.createElement("ul");r.classList.add("wp-block-mg-block-slider-slider__thumbnails"),this.slider.classList.contains("alignwide")&&r.classList.add("alignwide"),this.slider.classList.contains("alignfull")&&r.classList.add("alignfull"),this.slides.forEach((function(e,i){var s=e.querySelector("img")?e.querySelector("img").src:null;if(s){var n=s.split(".").pop(),l=s.slice(0,s.length-n.length-1);r.innerHTML+='\n\t\t\t\t\t\t<li class="wp-block-mg-block-slider-slider__thumb">\n\t\t\t\t\t\t\t<img src="'.concat(l,".").concat(n,'" alt="').concat(t.i18n.slide," ").concat(i+1,'">\n\t\t\t\t\t\t\t<span class="screen-reader-text">').concat(t.i18n.showSlide," ").concat(i+1,"</span>\n\t\t\t\t\t\t</li>")}else s=e.querySelector("video")?"video":"img",r.innerHTML+='\n\t\t\t\t\t\t<li class="wp-block-mg-block-slider-slider__thumb wp-block-mg-block-slider-slider__thumb--'.concat(s,'">\n\t\t\t\t\t\t\t<span class="screen-reader-text">').concat(t.i18n.showSlide," ").concat(i+1,"</span>\n\t\t\t\t\t\t</li>")})),this.slider.insertAdjacentElement("afterend",r),this.thumbs=document.querySelectorAll("".concat(this.selector," .wp-block-mg-block-slider-slider__thumbnails .wp-block-mg-block-slider-slider__thumb")),this.thumbs[this.current].classList.add("wp-block-mg-block-slider-slider__thumb--current"),this.thumbs.forEach((function(e,i){e.addEventListener("click",(function(){t.changeControls(t.navDots,"wp-block-mg-block-slider-slider__control__dot--current",i),t.changeSlide("dots",i),(i===t.current+1||i===t.current-1)&&t.changeSlide(!1,i),t.current=i}))})),this.slider.classList.add("thumbnails-nav"),this.hideThumbs&&this.slider.classList.add("thumbnails-nav--is-hidden")}}},{key:"changeSlide",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.current;this.slides.forEach((function(t,s){if(t.classList.remove("wp-block-mg-block-slider-slide__current","wp-block-mg-block-slider-slide__prev","wp-block-mg-block-slider-slide__next"),setTimeout((function(){e.slidesContainer.classList.remove("wp-block-mg-block-slider-slides__container--prev","wp-block-mg-block-slider-slides__container--next")}),e.speed),t.querySelector("video")){t.classList.add("wp-block-mg-block-slider-slide--has-video");var n=1e3*Math.ceil(t.querySelector("video").duration);e.pauseUnfocused&&(s===i?t.querySelector("video").play():t.querySelector("video").pause()),s===i&&e.waitVideo&&(t.querySelector("video").autoplay?(clearInterval(e.animation),e.animation=setInterval((function(t){e.current=(e.current+1)%e.slides.length,e.changeSlide("next",t)}),n+250)):e.animation=setInterval((function(t){e.current=(e.current+1)%e.slides.length,e.changeSlide("next",t)}),e.duration))}})),"none"===this.animation&&"fade"===this.animation||(this.orderSlides(i),"next"===t&&this.slidesContainer.classList.add("wp-block-mg-block-slider-slides__container--next"),"prev"===t&&this.slidesContainer.classList.add("wp-block-mg-block-slider-slides__container--prev")),this.slides[i].classList.add("wp-block-mg-block-slider-slide__current"),this.controlNav&&this.changeControls(this.navDots,"wp-block-mg-block-slider-slider__control__dot--current",i),this.thumbsNav&&this.changeControls(this.thumbs,"wp-block-mg-block-slider-slider__thumb--current",i)}},{key:"changeControls",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.current;void 0!==t&&(t.forEach((function(t){return t.classList.remove(e)})),t[i].classList.add(e))}},{key:"orderSlides",value:function(t){this.slides.length>2&&(null!=this.slides[t].previousElementSibling?this.slides[t].previousElementSibling.classList.add("wp-block-mg-block-slider-slide__prev"):this.slides[this.slides.length-1].classList.add("wp-block-mg-block-slider-slide__prev"),null!=this.slides[t].nextElementSibling?this.slides[t].nextElementSibling.classList.add("wp-block-mg-block-slider-slide__next"):this.slides[0].classList.add("wp-block-mg-block-slider-slide__next"))}},{key:"swipeEvents",value:function(){var t=this,e=0,i=0;this.slidesContainer.addEventListener("touchstart",(function(e){clearInterval(t.animation),t.slider.classList.add("dragging"),t.slidesContainer.style.transitionDuration="0ms",i=e.touches[0].clientX-t.slides[t.current].clientLeft}),!1),this.slidesContainer.addEventListener("touchmove",(function(s){e=s.touches[0].clientX,t.slides[t.current].style.transform="translate3d(".concat(e-i,"px, 0, 0)"),t.slidesContainer.querySelector(".wp-block-mg-block-slider-slide__prev").style.transform="translate3d(calc(".concat(e-i,"px - 100%), 0, 0)"),t.slidesContainer.querySelector(".wp-block-mg-block-slider-slide__next").style.transform="translate3d(calc(".concat(e-i,"px + 100%), 0, 0)")})),this.slidesContainer.addEventListener("touchend",(function(s){t.slidesContainer.querySelector(".wp-block-mg-block-slider-slide__current").style.removeProperty("transform"),t.slidesContainer.querySelector(".wp-block-mg-block-slider-slide__prev").style.removeProperty("transform"),t.slidesContainer.querySelector(".wp-block-mg-block-slider-slide__next").style.removeProperty("transform"),e-i>100?(t.current>0?t.current--:t.current=t.slides.length-1,t.changeSlide("prev")):e-i<100&&(t.current=(t.current+1)%t.slides.length,t.changeSlide("next")),t.slider.classList.remove("dragging"),t.slidesContainer.style.transitionDuration="".concat(t.speed,"ms"),t.autoStart&&(t.animation=setInterval((function(){t.current=(t.current+1)%t.slides.length,t.changeSlide("next",t.current)}),t.duration))}),!1)}},{key:"keyEvents",value:function(){var t=this;document.addEventListener("keydown",(function(e){switch(clearInterval(t.animation),e.key){case"ArrowLeft":t.slider.classList.contains("is-changing")||(t.slider.classList.add("is-changing"),t.current>0?t.current--:t.current=t.slides.length-1,t.changeSlide("prev"),setTimeout((function(){return t.slider.classList.remove("is-changing")}),t.speed));break;case"ArrowRight":t.slider.classList.contains("is-changing")||(t.slider.classList.add("is-changing"),t.current=(t.current+1)%t.slides.length,t.changeSlide("next"),setTimeout((function(){return t.slider.classList.remove("is-changing")}),t.speed))}t.autoStart&&(t.animation=setInterval((function(){t.current=(t.current+1)%t.slides.length,t.changeSlide("next",t.current)}),t.duration))}))}},{key:"startAnimation",value:function(){var t=this;this.animation=setInterval((function(e){t.current=(t.current+1)%t.slides.length,t.changeSlide("next",e)}),this.duration),this.stopOnHover?(this.slider.addEventListener("mouseenter",(function(){return clearInterval(t.animation)})),this.slider.addEventListener("mouseleave",(function(){t.animation=setInterval((function(){t.current=(t.current+1)%t.slides.length,t.changeSlide("next",t.current)}),t.duration)}))):this.slider.parentElement.addEventListener("click",(function(){clearInterval(t.animation),t.animation=setInterval((function(){t.current=(t.current+1)%t.slides.length,t.changeSlide("next",t.current)}),t.duration)})),this.pauseUnfocused&&new IntersectionObserver((function(e,i){e.forEach((function(e){e.isIntersecting?t.triggerObserver&&(t.animation=setInterval((function(e){t.current=(t.current+1)%t.slides.length,t.changeSlide("next",e)}),t.duration)):(clearInterval(t.animation),t.triggerObserver=!0)}))}),{root:null,rootMargin:"0px",threshold:.3}).observe(this.slider),document.addEventListener("visibilitychange",(function(){"visible"!==document.visibilityState?clearInterval(t.animation):t.animation=setInterval((function(){t.current=(t.current+1)%t.slides.length,t.changeSlide("next",t.current)}),t.duration)}))}},{key:"loadingEvent",value:function(t){t||(this.loadingSpinner=document.createElement("div"),this.loadingSpinner.classList.add("wp-block-mg-block-slider-slider__loading"),this.loadingSpinner.innerHTML='<p><span class="screen-reader-text">'.concat(this.i18n.loading,"</span></p>"),this.slider.parentElement.appendChild(this.loadingSpinner))}}],n&&e(s.prototype,n),Object.defineProperty(s,"prototype",{writable:!1}),i}();!function(t){void 0===t.MGBlockSlider&&(t.MGBlockSlider=i)}(window)}();